Refactored `generate_test_data` implementation for improved debuggability.
