A batch of improvements to state handling in the UI to solve loading bugs.
