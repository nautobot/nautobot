{% extends 'generic/object_create.html' %}
{% load form_helpers %}
{% load helpers %}

{% block title %}{% if editing %}Editing interface {{ obj }}{% endif %}{% endblock %}

{% block form %}
    <div class="panel panel-default">
        <div class="panel-heading"><strong>Interface</strong></div>
        <div class="panel-body">
            {% render_field form.device %}
            {% render_field form.module_family %}
            {% render_field form.module %}
            {% if editing %}
                {% render_field form.name %}
                {% render_field form.label %}
            {% else %}
                {% render_field form.name_pattern %}
                {% render_field form.label_pattern %}
            {% endif %}
            {% render_field form.status %}
            {% render_field form.role %}
            {% render_field form.type %}
            <div class="form-group{% if form.speed.errors %} has-error{% endif %}">
                <label class="col-md-3 control-label" for="id_speed">{{ form.speed.label }}</label>
                <div class="col-md-9">
                    <div class="input-group">
                        {{ form.speed }}
                        {% include 'dcim/inc/speed_widget.html' with target_field='speed' %}
                    </div>
                    {% if form.speed.errors %}
                        <ul>
                            {% for error in form.speed.errors %}
                                <li class="text-danger">{{ error }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </div>
            </div>
            {% render_field form.duplex %}
            {% render_field form.enabled %}
            {% render_field form.parent_interface %}
            {% render_field form.bridge %}
            {% render_field form.lag %}
            {% render_field form.mtu %}
            {% render_field form.vrf %}
            {% render_field form.virtual_device_contexts %}
            {% render_field form.mac_address %}
            {% render_field form.description %}
            {% render_field form.mgmt_only %}
            {% render_field form.ip_addresses %}
        </div>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading"><strong>802.1Q Switching</strong></div>
        <div class="panel-body">
            {% render_field form.mode %}
            {% render_field form.untagged_vlan %}
            {% render_field form.tagged_vlans %}
        </div>
    </div>
    {% include 'inc/extras_features_edit_form_fields.html' %}
{% endblock %}

{% block buttons %}
    {% if editing %}
        <button type="submit" name="_update" class="btn btn-primary">Update</button>
        <button type="submit" formaction="?return_url={% url 'dcim:interface_edit' pk=obj.pk %}" class="btn btn-primary">Update and Continue Editing</button>
    {% else %}
        <button type="submit" name="_create" class="btn btn-primary">Create</button>
        <button type="submit" name="_addanother" class="btn btn-primary">Create and Add Another</button>
    {% endif %}
    <a href="{{ return_url }}" class="btn btn-default">Cancel</a>
{% endblock %}

{% block javascript %}
    {{ block.super }}
    {% include 'dcim/inc/speed_widget_js.html' %}
{% endblock %}