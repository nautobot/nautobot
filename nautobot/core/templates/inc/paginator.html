{% load helpers %}

<div class="paginator text-right">
    {% if paginator.num_pages > 1 %}
        <nav>
            <ul class="pagination float-end">
                {% if page.has_previous %}
                    <li class="page-item">
                        <a class="page-link" href="{% querystring request page=page.previous_page_number %}" aria-label="Previous">
                          <span aria-hidden="true">&laquo;</span>
                        </a>
                      </li>
                {% endif %}
                {% for p in page.smart_pages %}
                    {% if p %}
                        <li class="page-item {% if page.number == p %} active{% endif %}"><a class="page-link" href="{% querystring request page=p %}">{{ p }}</a></li>
                    {% else %}
                        <li class="page-item disabled"><span>&hellip;</span></li>
                    {% endif %}
                {% endfor %}
                {% if page.has_next %}
                    <li class="page-item">
                        <a class="page-link" href="{% querystring request page=page.next_page_number %}" aria-label="Next">
                          <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                {% endif %}
            </ul>
        </nav>
    {% endif %}
    <form method="get" class="form-inline">
        {% for k, v_list in request.GET.lists %}
            {% if k != 'per_page' %}
                {% for v in v_list %}
                    <input type="hidden" name="{{ k }}" value="{{ v }}" />
                {% endfor %}
            {% endif %}
        {% endfor %}
        <select name="per_page" id="per_page" class="form-control">
            {% if page.paginator.per_page not in "PER_PAGE_DEFAULTS"|settings_or_config %}
                <option value="{{ page.paginator.per_page }}" selected="selected">{{ page.paginator.per_page }}</option>
            {% endif %}
            {% for n in "PER_PAGE_DEFAULTS"|settings_or_config %}
                <option value="{{ n }}"{% if page.paginator.per_page == n %} selected="selected"{% endif %}>{{ n }}</option>
            {% endfor %}
        </select> per page
        {% if page %}
            <div class="text-right text-muted">
                Showing {{ page.start_index }}-{{ page.end_index }} of {{ page.paginator.count }}
            </div>
        {% endif %}
    </form>
</div>
