{% load static %}
{% load helpers %}
{% load plugins %}
{% load django_htmx %}

<!DOCTYPE html>
<html lang="en"{% if request.COOKIES|get_item:"theme" == 'dark' %} data-theme="dark" data-bs-theme="dark"{% endif %}>
<head>
    <title>{% block title %}Home{% endblock %} - {{ settings.BRANDING_TITLE }}</title>
    {% include 'inc/media.html' %}
    {% block extra_styles %}{% endblock %}
    {% htmx_script %}
</head>
<body hx-headers='{"x-csrftoken": "{{ csrf_token }}"}'>
    {% include 'inc/nav_menu.html' %}
    <div id="drawer">
        {% block drawer %}{% endblock drawer %}
    </div>
    <header id="header">
        <div class="banner-alert-area">
            {% if request.user.is_authenticated %}
                {% if "BANNER_TOP"|settings_or_config %}
                    <div class="alert alert-info text-center" role="alert">
                        {{ "BANNER_TOP"|settings_or_config|render_markdown }}
                    </div>
                {% endif %}
            {% endif %}
            {% if settings.MAINTENANCE_MODE %}
                <div class="alert alert-warning text-center" role="alert">
                    <h4><i class="mdi mdi-alert"></i> Maintenance Mode</h4>
                    <p>Nautobot is currently in maintenance mode. Functionality may be limited.</p>
                </div>
            {% endif %}
            {% plugin_banners %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissable" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span>&times;</span>
                    </button>
                    {{ message }}
                </div>
            {% endfor %}
        </div>
        <div class="container-fluid mb-12 mt-16">
            <div class="row row-cols-3">
                <div class="col">
                    {% block breadcrumbs %}{% endblock breadcrumbs %}
                </div>
                {% include 'inc/header.html' %}
            </div>
        </div>
        {% block header %}{% endblock header %}
    </header>
    <main class="container-fluid wrapper" id="main-content" tabindex="-1">
        {% block content %}{% endblock content %}
        <div class="push"></div>
        {% if request.user.is_authenticated %}
            {% if "BANNER_BOTTOM"|settings_or_config %}
                <div class="alert alert-info text-center banner-bottom" role="alert">
                    {{ "BANNER_BOTTOM"|settings_or_config|render_markdown }}
                </div>
            {% endif %}
        {% endif %}
    </main>
    {% include 'modals/modal_theme.html' with name='theme'%}
    {% include 'inc/footer.html' %}
    {% include 'inc/javascript.html' %}
{% block javascript %}{% endblock %}
</body>
</html>
